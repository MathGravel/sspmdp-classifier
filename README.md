# SSPMDP-Classifier: Reproducibility Guide

This repository contains all code to reproduce the results from our CANAI 2025 paper: https://www.jaelgareau.com/en/publication/gravel-canai25/

## Structure
- **classify-explain.py**: Python classification and explainable AI scripts
- **graph-toolkit/**: C++ code for generating and analyzing synthetic MDPs
- **mdptk/**: C++ code for solving MDPs with various algorithms

## Setup
1. **Install dependencies:**
   - Python: `pip install -r requirements.txt`
   - C++: `sudo apt install g++ libgoogle-glog-dev libgflags-dev perl pkg-config libboost-dev libcereal-dev`
2. **Build solvers:**
   - `make -C graph-toolkit`
   - `make -C mdptk`

## Generating Domains (MDPs)
- `cd graph-toolkit`
- `./gtk generateBatch config.txt`
- Check `graph-toolkit/README.md` for details

#### Format of config.txt
```
START
problem_type1 problem_type2 ...
END
numGraphsPerType
save_folder
max_nodes
```
- problem_type1, etc.: one or more of `erdosNP`, `erdosNM`, `smallWorld`, `barabasi`, `kronecker` (space-separated)
- numGraphsPerType: integer (number of graphs per type)
- save_folder: output folder
- max_nodes: integer (maximum nodes per graph)

### Feature Extraction for Classification
- When generating MDPs with **mdptk** (including well-known domains like Wetfloor, Single-Armed Pendulum):
   1. Generate the MDP file with mdptk
   2. Create its graph (determinization) with mdptk
   3. Run: `./graph-toolkit/gtk analyze oneline < determinized_mdp.graph`
   4. The output line contains features needed by the classifier
- For synthetic MDPs generated by **graph-toolkit** (using `generateBatch`), a CSV with features is created automatically.

## Running Solvers
- `cd mdptk`
- `./mdptk --helpshort` for available flags

## Running Classification
- Prepare feature CSV files and place them in a folder
- Run: `python3 classify-explain.py --input <folder> --print summary`
- Use `--print {summary,cf,importance,df,debug}` to select output

## Replication Checklist
- Generate domains with graph-toolkit
- Solve domains with mdptk
- Analyze/visualize results with classify-explain.py

---
For full module usage and options, see graph-toolkit/README.md and mdptk/README.md in subfolders.
You can also check the in-programs help messages (i.e., `mdptk/mdptk --helpshort` and `graph-toolkit/gtk`).
